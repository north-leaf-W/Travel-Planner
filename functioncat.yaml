system: 1.0.0
info:
  name: travel-planner # 项目名称
  description: "一个基于Vue 3和Element Plus的旅行计划管理应用，帮助用户规划和管理他们的旅行计划。" # 项目描述
  vars:
    # Firebase 配置变量, 您需要在部署平台的设置中填写实际的值
    # 这些值通常从 Firebase 项目的设置 -> 常规 -> 您的应用 -> SDK 设置和配置 中获取
    FIREBASE_API_KEY:
      description: "Firebase API Key。从 Firebase 控制台的项目设置中获取。"
    FIREBASE_AUTH_DOMAIN:
      description: "Firebase Auth Domain。从 Firebase 控制台的项目设置中获取。"
    FIREBASE_DATABASE_URL:
      description: "Firebase Realtime Database URL。从 Firebase 控制台的项目设置中获取。"
    FIREBASE_PROJECT_ID:
      description: "Firebase Project ID。从 Firebase 控制台的项目设置中获取。"
    FIREBASE_STORAGE_BUCKET:
      description: "Firebase Storage Bucket。从 Firebase 控制台的项目设置中获取。"
    FIREBASE_MESSAGING_SENDER_ID:
      description: "Firebase Messaging Sender ID。从 Firebase 控制台的项目设置中获取。"
    FIREBASE_APP_ID:
      description: "Firebase App ID。从 Firebase 控制台的项目设置中获取。"

envs:
  dev:
    branch: develop # 开发环境对应的 Git 分支 (您可以根据实际情况修改，例如 'dev' 或 'main')
  prod:
    branch: main   # 生产环境对应的 Git 分支 (通常是 'main' 或 'master')

routes:
  main_env: prod # 主要部署环境指向 prod
  main_app: plannerui # 主要应用指向下面定义的 plannerui

apps:
  plannerui: # 前端应用的唯一标识名
    type: web_frontend # 应用类型：Web 前端
    envs:
      dev: # 开发环境配置
        build:
          root_path: . # 项目根目录 (package.json 所在目录)
          script: "npm install; npm run build" # 构建命令 (先安装依赖，然后执行构建)
        provision:
          root_path: dist # Vite 构建后静态文件的输出目录
          type: nodejs18x # 部署预置类型。这里假设使用 Node.js 环境来服务静态文件。
                           # 如果您的平台支持纯静态网站部署，可以修改为此类型 (例如 'static')。
        vars: # 注入到此环境的环境变量 (Vite 在客户端代码中通过 import.meta.env.VITE_XXX 访问)
          VITE_FIREBASE_API_KEY: ${{vars.FIREBASE_API_KEY}}
          VITE_FIREBASE_AUTH_DOMAIN: ${{vars.FIREBASE_AUTH_DOMAIN}}
          VITE_FIREBASE_DATABASE_URL: ${{vars.FIREBASE_DATABASE_URL}}
          VITE_FIREBASE_PROJECT_ID: ${{vars.FIREBASE_PROJECT_ID}}
          VITE_FIREBASE_STORAGE_BUCKET: ${{vars.FIREBASE_STORAGE_BUCKET}}
          VITE_FIREBASE_MESSAGING_SENDER_ID: ${{vars.FIREBASE_MESSAGING_SENDER_ID}}
          VITE_FIREBASE_APP_ID: ${{vars.FIREBASE_APP_ID}}
      prod: # 生产环境配置
        build:
          root_path: .
          script: "npm install; npm run build"
        provision:
          root_path: dist
          type: nodejs18x # 同上
        vars: # 同上
          VITE_FIREBASE_API_KEY: ${{vars.FIREBASE_API_KEY}}
          VITE_FIREBASE_AUTH_DOMAIN: ${{vars.FIREBASE_AUTH_DOMAIN}}
          VITE_FIREBASE_DATABASE_URL: ${{vars.FIREBASE_DATABASE_URL}}
          VITE_FIREBASE_PROJECT_ID: ${{vars.FIREBASE_PROJECT_ID}}
          VITE_FIREBASE_STORAGE_BUCKET: ${{vars.FIREBASE_STORAGE_BUCKET}}
          VITE_FIREBASE_MESSAGING_SENDER_ID: ${{vars.FIREBASE_MESSAGING_SENDER_ID}}
          VITE_FIREBASE_APP_ID: ${{vars.FIREBASE_APP_ID}}